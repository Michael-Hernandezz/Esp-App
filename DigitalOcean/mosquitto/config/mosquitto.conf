# Configuracion Mosquitto para produccion
# Archivo: DigitalOcean/mosquitto/config/mosquitto.conf

# Configuracion basica
persistence true
persistence_location /mosquitto/data/

# Archivos de log
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning  
log_type notice
log_type information
connection_messages true
log_timestamp true

# Listener para conexiones normales (ESP32)
listener 1883 0.0.0.0
protocol mqtt

# Listener para WebSockets (aplicaciones web)
listener 9001 0.0.0.0
protocol websockets

# Configuracion de usuario (deshabilitada por defecto)
# Para habilitar autenticacion, descomenta las siguientes lineas:
# allow_anonymous false
# password_file /mosquitto/config/passwordfile

# Configuracion de seguridad basica
allow_anonymous true
max_connections 100
max_inflight_messages 20
max_queued_messages 100

# ACL (deshabilitada por defecto)
# acl_file /mosquitto/config/aclfile

# Keep alive
keepalive_interval 60

# Configuracion de bridge (para conectar con otros brokers)
# connection bridge-to-cloud
# address mqtt.cloud-provider.com:1883
# topic # out 0 local/ remote/
# bridge_attempt_unsubscribe true
# bridge_cleanup_local_topic true
# try_private false